<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Webapck 5.0 æ–°ç‰¹æ€§å°é²œ | æ½œå¿ƒæ‘¸é±¼ï¼Œæˆ’éª„æˆ’èº</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="....">
    <link rel="preload" href="/assets/css/0.styles.8ada974c.css" as="style"><link rel="preload" href="/assets/js/app.be40bd60.js" as="script"><link rel="preload" href="/assets/js/2.fcfb7384.js" as="script"><link rel="preload" href="/assets/js/12.0b6b2e75.js" as="script"><link rel="prefetch" href="/assets/js/10.a9ac570e.js"><link rel="prefetch" href="/assets/js/11.416a0fa6.js"><link rel="prefetch" href="/assets/js/3.c76c3f2c.js"><link rel="prefetch" href="/assets/js/4.b6579f35.js"><link rel="prefetch" href="/assets/js/5.b086611e.js"><link rel="prefetch" href="/assets/js/6.9ea11631.js"><link rel="prefetch" href="/assets/js/7.296733e2.js"><link rel="prefetch" href="/assets/js/8.d1df2860.js"><link rel="prefetch" href="/assets/js/9.89661334.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8ada974c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">æ½œå¿ƒæ‘¸é±¼ï¼Œæˆ’éª„æˆ’èº</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯çŸ¥è¯†ä½“ç³»" class="dropdown-title"><span class="title">å‰ç«¯çŸ¥è¯†ä½“ç³»</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/articles/react.html" class="nav-link">
  ä¸€ç¯‡å°±å¤Ÿäº†ï¼šReactå…¨å®¶æ¡¶
</a></li><li class="dropdown-item"><!----> <a href="/articles/network.html" class="nav-link">
  ä¸€ç¯‡å°±å¤Ÿäº†ï¼šHttpåŸºç¡€çŸ¥è¯†ä¸€ç½‘æ‰“å°½
</a></li><li class="dropdown-item"><!----> <a href="/articles/optimize.html" class="nav-link">
  ä¸€ç¯‡å°±å¤Ÿäº†ï¼šå‰ç«¯æ€§èƒ½ä¼˜åŒ–
</a></li><li class="dropdown-item"><!----> <a href="/articles/css.html" class="nav-link">
  å¿…çŸ¥å¿…ä¼šï¼šCSS
</a></li><li class="dropdown-item"><!----> <a href="/articles/es6.html" class="nav-link">
  å¿…çŸ¥å¿…ä¼šï¼šJavaScriptä¸ES6
</a></li><li class="dropdown-item"><!----> <a href="/articles/node.html" class="nav-link">
  å¿…çŸ¥å¿…ä¼šï¼šNode.js
</a></li><li class="dropdown-item"><!----> <a href="/articles/design-patterns.html" class="nav-link">
  å¿…çŸ¥å¿…ä¼šï¼šè®¾è®¡æ¨¡å¼
</a></li><li class="dropdown-item"><!----> <a href="/articles/security.html" class="nav-link">
  å¿…çŸ¥å¿…ä¼šï¼šWebå®‰å…¨
</a></li><li class="dropdown-item"><!----> <a href="/articles/algorithm.html" class="nav-link">
  å¿…çŸ¥å¿…ä¼šï¼šç®—æ³•
</a></li><li class="dropdown-item"><!----> <a href="/articles/engineer.html" class="nav-link">
  å¿…çŸ¥å¿…ä¼šï¼šå·¥ç¨‹åŒ–ä¸éƒ¨ç½²
</a></li><li class="dropdown-item"><!----> <a href="/articles/multi-terminal.html" class="nav-link">
  å¿«é€Ÿä¸Šæ‰‹ï¼šå¤šç«¯ï¼ˆTaroï¼‰
</a></li><li class="dropdown-item"><!----> <a href="/articles/webpack-v5.html" class="nav-link router-link-exact-active router-link-active">
  å¿«é€Ÿä¸Šæ‰‹ï¼šWebpack 5.0
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ‰‹å†™é¢˜" class="dropdown-title"><span class="title">æ‰‹å†™é¢˜</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/articles/debounce-throttle.html" class="nav-link">
  é˜²æŠ–ã€èŠ‚æµ
</a></li><li class="dropdown-item"><!----> <a href="/articles/copy.html" class="nav-link">
  æ·±æµ…æ‹·è´
</a></li><li class="dropdown-item"><!----> <a href="/articles/entrust.html" class="nav-link">
  äº‹ä»¶å§”æ‰˜
</a></li><li class="dropdown-item"><!----> <a href="/articles/new.html" class="nav-link">
  new
</a></li><li class="dropdown-item"><!----> <a href="/articles/promise.html" class="nav-link">
  promise
</a></li><li class="dropdown-item"><!----> <a href="/articles/call-apply-bind.html" class="nav-link">
  callã€applyã€bind
</a></li><li class="dropdown-item"><!----> <a href="/articles/curry.html" class="nav-link">
  å‡½æ•°æŸ¯é‡ŒåŒ–
</a></li><li class="dropdown-item"><!----> <a href="/articles/drag-dom.html" class="nav-link">
  å®ç°æ‹–æ‹½div
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æœ‰è¶£çš„å°é¡¹ç›®" class="dropdown-title"><span class="title">æœ‰è¶£çš„å°é¡¹ç›®</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/articles/little-news.html" class="nav-link">
  Chromeæ’ä»¶ï¼šå‰ç«¯å°æŠ¥
</a></li><li class="dropdown-item"><!----> <a href="/articles/green-wall.html" class="nav-link">
  VSCodeæ’ä»¶ï¼šç”¨Githubå°ç»¿ç‚¹ç”»ä¸ªç”»
</a></li><li class="dropdown-item"><!----> <a href="/articles/ftp-deploy.html" class="nav-link">
  Webpack Pluginï¼šftpDeploy
</a></li><li class="dropdown-item"><!----> <a href="/articles/multi-language.html" class="nav-link">
  Webpack Loaderï¼šå¤šè¯­è¨€
</a></li><li class="dropdown-item"><!----> <a href="/articles/apm.html" class="nav-link">
  å‰ç«¯æ€§èƒ½ç›‘æ§ç³»ç»Ÿæ­å»º
</a></li><li class="dropdown-item"><!----> <a href="/articles/code-rule.html" class="nav-link">
  å›¢é˜Ÿå¼€å‘ï¼šä»£ç è§„èŒƒ
</a></li><li class="dropdown-item"><!----> <a href="/articles/cli.html" class="nav-link">
  å›¢é˜Ÿå¼€å‘ï¼šReacté¡¹ç›®è„šæ‰‹æ¶
</a></li><li class="dropdown-item"><!----> <a href="/articles/component.html" class="nav-link">
  å›¢é˜Ÿå¼€å‘ï¼šReacté¡¹ç›®ç»„ä»¶åº“
</a></li><li class="dropdown-item"><!----> <a href="/articles/component.html" class="nav-link">
  å›¢é˜Ÿå¼€å‘ï¼šé¡¹ç›®æ¨¡æ¿
</a></li></ul></div></div> <a href="https://github.com/Xumengxiang/inner-peace" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯çŸ¥è¯†ä½“ç³»" class="dropdown-title"><span class="title">å‰ç«¯çŸ¥è¯†ä½“ç³»</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/articles/react.html" class="nav-link">
  ä¸€ç¯‡å°±å¤Ÿäº†ï¼šReactå…¨å®¶æ¡¶
</a></li><li class="dropdown-item"><!----> <a href="/articles/network.html" class="nav-link">
  ä¸€ç¯‡å°±å¤Ÿäº†ï¼šHttpåŸºç¡€çŸ¥è¯†ä¸€ç½‘æ‰“å°½
</a></li><li class="dropdown-item"><!----> <a href="/articles/optimize.html" class="nav-link">
  ä¸€ç¯‡å°±å¤Ÿäº†ï¼šå‰ç«¯æ€§èƒ½ä¼˜åŒ–
</a></li><li class="dropdown-item"><!----> <a href="/articles/css.html" class="nav-link">
  å¿…çŸ¥å¿…ä¼šï¼šCSS
</a></li><li class="dropdown-item"><!----> <a href="/articles/es6.html" class="nav-link">
  å¿…çŸ¥å¿…ä¼šï¼šJavaScriptä¸ES6
</a></li><li class="dropdown-item"><!----> <a href="/articles/node.html" class="nav-link">
  å¿…çŸ¥å¿…ä¼šï¼šNode.js
</a></li><li class="dropdown-item"><!----> <a href="/articles/design-patterns.html" class="nav-link">
  å¿…çŸ¥å¿…ä¼šï¼šè®¾è®¡æ¨¡å¼
</a></li><li class="dropdown-item"><!----> <a href="/articles/security.html" class="nav-link">
  å¿…çŸ¥å¿…ä¼šï¼šWebå®‰å…¨
</a></li><li class="dropdown-item"><!----> <a href="/articles/algorithm.html" class="nav-link">
  å¿…çŸ¥å¿…ä¼šï¼šç®—æ³•
</a></li><li class="dropdown-item"><!----> <a href="/articles/engineer.html" class="nav-link">
  å¿…çŸ¥å¿…ä¼šï¼šå·¥ç¨‹åŒ–ä¸éƒ¨ç½²
</a></li><li class="dropdown-item"><!----> <a href="/articles/multi-terminal.html" class="nav-link">
  å¿«é€Ÿä¸Šæ‰‹ï¼šå¤šç«¯ï¼ˆTaroï¼‰
</a></li><li class="dropdown-item"><!----> <a href="/articles/webpack-v5.html" class="nav-link router-link-exact-active router-link-active">
  å¿«é€Ÿä¸Šæ‰‹ï¼šWebpack 5.0
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ‰‹å†™é¢˜" class="dropdown-title"><span class="title">æ‰‹å†™é¢˜</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/articles/debounce-throttle.html" class="nav-link">
  é˜²æŠ–ã€èŠ‚æµ
</a></li><li class="dropdown-item"><!----> <a href="/articles/copy.html" class="nav-link">
  æ·±æµ…æ‹·è´
</a></li><li class="dropdown-item"><!----> <a href="/articles/entrust.html" class="nav-link">
  äº‹ä»¶å§”æ‰˜
</a></li><li class="dropdown-item"><!----> <a href="/articles/new.html" class="nav-link">
  new
</a></li><li class="dropdown-item"><!----> <a href="/articles/promise.html" class="nav-link">
  promise
</a></li><li class="dropdown-item"><!----> <a href="/articles/call-apply-bind.html" class="nav-link">
  callã€applyã€bind
</a></li><li class="dropdown-item"><!----> <a href="/articles/curry.html" class="nav-link">
  å‡½æ•°æŸ¯é‡ŒåŒ–
</a></li><li class="dropdown-item"><!----> <a href="/articles/drag-dom.html" class="nav-link">
  å®ç°æ‹–æ‹½div
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æœ‰è¶£çš„å°é¡¹ç›®" class="dropdown-title"><span class="title">æœ‰è¶£çš„å°é¡¹ç›®</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/articles/little-news.html" class="nav-link">
  Chromeæ’ä»¶ï¼šå‰ç«¯å°æŠ¥
</a></li><li class="dropdown-item"><!----> <a href="/articles/green-wall.html" class="nav-link">
  VSCodeæ’ä»¶ï¼šç”¨Githubå°ç»¿ç‚¹ç”»ä¸ªç”»
</a></li><li class="dropdown-item"><!----> <a href="/articles/ftp-deploy.html" class="nav-link">
  Webpack Pluginï¼šftpDeploy
</a></li><li class="dropdown-item"><!----> <a href="/articles/multi-language.html" class="nav-link">
  Webpack Loaderï¼šå¤šè¯­è¨€
</a></li><li class="dropdown-item"><!----> <a href="/articles/apm.html" class="nav-link">
  å‰ç«¯æ€§èƒ½ç›‘æ§ç³»ç»Ÿæ­å»º
</a></li><li class="dropdown-item"><!----> <a href="/articles/code-rule.html" class="nav-link">
  å›¢é˜Ÿå¼€å‘ï¼šä»£ç è§„èŒƒ
</a></li><li class="dropdown-item"><!----> <a href="/articles/cli.html" class="nav-link">
  å›¢é˜Ÿå¼€å‘ï¼šReacté¡¹ç›®è„šæ‰‹æ¶
</a></li><li class="dropdown-item"><!----> <a href="/articles/component.html" class="nav-link">
  å›¢é˜Ÿå¼€å‘ï¼šReacté¡¹ç›®ç»„ä»¶åº“
</a></li><li class="dropdown-item"><!----> <a href="/articles/component.html" class="nav-link">
  å›¢é˜Ÿå¼€å‘ï¼šé¡¹ç›®æ¨¡æ¿
</a></li></ul></div></div> <a href="https://github.com/Xumengxiang/inner-peace" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/webpack-v5.html" class="active sidebar-link">ä¸€ç¯‡å°±å¤Ÿäº†ï¼šWebapck 5.0 æ–°ç‰¹æ€§å°é²œ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/articles/webpack-v5.html#ä¸»è¦å†…å®¹" class="sidebar-link">ä¸»è¦å†…å®¹</a></li><li class="sidebar-sub-header"><a href="/articles/webpack-v5.html#è¿ç§»æŒ‡å—" class="sidebar-link">è¿ç§»æŒ‡å—</a></li><li class="sidebar-sub-header"><a href="/articles/webpack-v5.html#å°é²œä¹‹æ—…" class="sidebar-link">å°é²œä¹‹æ—…</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/articles/webpack-v5.html#æ‰“åŒ…æ–‡ä»¶å¯¹æ¯”" class="sidebar-link">æ‰“åŒ…æ–‡ä»¶å¯¹æ¯”</a></li><li class="sidebar-sub-header"><a href="/articles/webpack-v5.html#æŒ‰éœ€åŠ è½½å¯¹æ¯”" class="sidebar-link">æŒ‰éœ€åŠ è½½å¯¹æ¯”</a></li><li class="sidebar-sub-header"><a href="/articles/webpack-v5.html#moduleids-å’Œ-chunkids" class="sidebar-link">moduleIds å’Œ chunkIds</a></li><li class="sidebar-sub-header"><a href="/articles/webpack-v5.html#ç¼–è¯‘é€Ÿåº¦" class="sidebar-link">ç¼–è¯‘é€Ÿåº¦</a></li><li class="sidebar-sub-header"><a href="/articles/webpack-v5.html#module-federation" class="sidebar-link">Module Federation</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webapck-5-0-æ–°ç‰¹æ€§å°é²œ"><a href="#webapck-5-0-æ–°ç‰¹æ€§å°é²œ" class="header-anchor">#</a> Webapck 5.0 æ–°ç‰¹æ€§å°é²œ</h1> <blockquote><p>Webpack å›¢é˜ŸäºåŒ—äº¬æ—¶é—´ 2019 å¹´ 10 æœˆ 12 æ—¥å‡Œæ™¨å‘å¸ƒäº† <code>v5.0.0-beta.0</code> ç‰ˆæœ¬ï¼Œå¹¶è®¡åˆ’äº 2020 å¹´ 10 æœˆ 10 æ—¥ å‘å¸ƒé¦–ä¸ªæ­£å¼ç‰ˆæœ¬ã€‚</p></blockquote> <p>æœ¬æ–‡ä¸»è¦æ ¹æ®<a href="https://github.com/webpack/changelog-v5" target="_blank" rel="noopener noreferrer">webpack/changelog-v5<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>è¿›è¡Œä½“éªŒå’Œæ€»ç»“</p> <h2 id="ä¸»è¦å†…å®¹"><a href="#ä¸»è¦å†…å®¹" class="header-anchor">#</a> ä¸»è¦å†…å®¹</h2> <p>Webpack 5.0 ä¸»è¦ä¼˜åŒ–æ–¹å‘ï¼š</p> <ol><li>é€šè¿‡æŒä¹…åŒ–å­˜å‚¨ä¼˜åŒ–æ„å»ºæ€§èƒ½ã€‚</li> <li>é‡‡ç”¨æ›´å¥½çš„ç®—æ³•ä¸ defalut æ¥æ”¹å–„é•¿æ•ˆç¼“å­˜ã€‚</li> <li>é€šè¿‡æ›´å¥½çš„ Tree Shaking å’Œä»£ç ç”Ÿæˆæ¥æ”¹å–„ bundle çš„å¤§å°ã€‚</li> <li>æ¸…é™¤å†…éƒ¨ç»“æ„ä¸­å¥‡æ€ªçš„ä»£ç ï¼ŒåŒæ—¶åœ¨ä¸å½±å“ v4 åŠŸèƒ½åŸºç¡€ä¸Šå®ç°äº†æ–°ç‰¹æ€§ã€‚</li> <li>é€šè¿‡å¼•å…¥ç ´åæ€§æ›´æ”¹æ¥ä¸ºæ–°ç‰¹æ€§åšå‡†å¤‡ï¼Œä»¥ä¾¿äºæˆ‘ä»¬èƒ½å°½å¯èƒ½é•¿æœŸåœ°ä½¿ç”¨ v5ã€‚</li></ol> <h2 id="è¿ç§»æŒ‡å—"><a href="#è¿ç§»æŒ‡å—" class="header-anchor">#</a> è¿ç§»æŒ‡å—</h2> <p><a href="https://github.com/webpack/changelog-v5/blob/master/MIGRATION%20GUIDE.md" target="_blank" rel="noopener noreferrer">ç‚¹æ­¤æŸ¥çœ‹è¿ç§»æŒ‡å—<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="å°é²œä¹‹æ—…"><a href="#å°é²œä¹‹æ—…" class="header-anchor">#</a> å°é²œä¹‹æ—…</h2> <h3 id="æ‰“åŒ…æ–‡ä»¶å¯¹æ¯”"><a href="#æ‰“åŒ…æ–‡ä»¶å¯¹æ¯”" class="header-anchor">#</a> æ‰“åŒ…æ–‡ä»¶å¯¹æ¯”</h3> <h4 id="v4"><a href="#v4" class="header-anchor">#</a> v4</h4> <p><code>src/index.js</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Goodbye, webpack v4!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¿è¡Œ<code>webpack --mode development</code>ï¼Œè¾“å‡ºçš„<code>main.js(3.8kb)</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/******/</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">modules</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// webpackBootstrap</span>
<span class="token comment">/******/</span> 	<span class="token comment">// The module cache</span>
<span class="token comment">/******/</span> 	<span class="token keyword">var</span> installedModules <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span> 	<span class="token comment">// The require function</span>
<span class="token comment">/******/</span> 	<span class="token keyword">function</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token parameter">moduleId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span> 		<span class="token comment">// Check if module is in cache</span>
<span class="token comment">/******/</span> 		<span class="token keyword">if</span><span class="token punctuation">(</span>installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">/******/</span> 			<span class="token keyword">return</span> installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
<span class="token comment">/******/</span> 		<span class="token punctuation">}</span>
<span class="token comment">/******/</span> 		<span class="token comment">// Create a new module (and put it into the cache)</span>
<span class="token comment">/******/</span> 		<span class="token keyword">var</span> module <span class="token operator">=</span> installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token comment">/******/</span> 			i<span class="token operator">:</span> moduleId<span class="token punctuation">,</span>
<span class="token comment">/******/</span> 			l<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token comment">/******/</span> 			exports<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">/******/</span> 		<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span> 		<span class="token comment">// Execute the module function</span>
<span class="token comment">/******/</span> 		modules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> module<span class="token punctuation">,</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> __webpack_require__<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span> 		<span class="token comment">// Flag the module as loaded</span>
<span class="token comment">/******/</span> 		module<span class="token punctuation">.</span>l <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span> 		<span class="token comment">// Return the exports of the module</span>
<span class="token comment">/******/</span> 		<span class="token keyword">return</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
<span class="token comment">/******/</span> 	<span class="token punctuation">}</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span> 	<span class="token comment">// expose the modules object (__webpack_modules__)</span>
<span class="token comment">/******/</span> 	__webpack_require__<span class="token punctuation">.</span>m <span class="token operator">=</span> modules<span class="token punctuation">;</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span> 	<span class="token comment">// expose the module cache</span>
<span class="token comment">/******/</span> 	__webpack_require__<span class="token punctuation">.</span>c <span class="token operator">=</span> installedModules<span class="token punctuation">;</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span> 	<span class="token comment">// define getter function for harmony exports</span>
<span class="token comment">/******/</span> 	__webpack_require__<span class="token punctuation">.</span><span class="token function-variable function">d</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">exports<span class="token punctuation">,</span> name<span class="token punctuation">,</span> getter</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">/******/</span> 		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>__webpack_require__<span class="token punctuation">.</span><span class="token function">o</span><span class="token punctuation">(</span>exports<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">/******/</span> 			Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>exports<span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token punctuation">{</span> enumerable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token keyword">get</span><span class="token operator">:</span> getter <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span> 		<span class="token punctuation">}</span>
<span class="token comment">/******/</span> 	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span> 	<span class="token comment">// define __esModule on exports</span>
<span class="token comment">/******/</span> 	__webpack_require__<span class="token punctuation">.</span><span class="token function-variable function">r</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">exports</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">/******/</span> 		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> Symbol <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token operator">&amp;&amp;</span> Symbol<span class="token punctuation">.</span>toStringTag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">/******/</span> 			Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>exports<span class="token punctuation">,</span> Symbol<span class="token punctuation">.</span>toStringTag<span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">'Module'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span> 		<span class="token punctuation">}</span>
<span class="token comment">/******/</span> 		Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>exports<span class="token punctuation">,</span> <span class="token string">'__esModule'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span> 	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span> 	<span class="token comment">// create a fake namespace object</span>
<span class="token comment">/******/</span> 	<span class="token comment">// mode &amp; 1: value is a module id, require it</span>
<span class="token comment">/******/</span> 	<span class="token comment">// mode &amp; 2: merge all properties of value into the ns</span>
<span class="token comment">/******/</span> 	<span class="token comment">// mode &amp; 4: return value when already ns object</span>
<span class="token comment">/******/</span> 	<span class="token comment">// mode &amp; 8|1: behave like require</span>
<span class="token comment">/******/</span> 	__webpack_require__<span class="token punctuation">.</span><span class="token function-variable function">t</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> mode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">/******/</span> 		<span class="token keyword">if</span><span class="token punctuation">(</span>mode <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> value <span class="token operator">=</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span> 		<span class="token keyword">if</span><span class="token punctuation">(</span>mode <span class="token operator">&amp;</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token keyword">return</span> value<span class="token punctuation">;</span>
<span class="token comment">/******/</span> 		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>mode <span class="token operator">&amp;</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">&amp;&amp;</span> value <span class="token operator">&amp;&amp;</span> value<span class="token punctuation">.</span>__esModule<span class="token punctuation">)</span> <span class="token keyword">return</span> value<span class="token punctuation">;</span>
<span class="token comment">/******/</span> 		<span class="token keyword">var</span> ns <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span> 		__webpack_require__<span class="token punctuation">.</span><span class="token function">r</span><span class="token punctuation">(</span>ns<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span> 		Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>ns<span class="token punctuation">,</span> <span class="token string">'default'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> enumerable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> value<span class="token operator">:</span> value <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span> 		<span class="token keyword">if</span><span class="token punctuation">(</span>mode <span class="token operator">&amp;</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> value <span class="token operator">!=</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> value<span class="token punctuation">)</span> __webpack_require__<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>ns<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> value<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span> 		<span class="token keyword">return</span> ns<span class="token punctuation">;</span>
<span class="token comment">/******/</span> 	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span> 	<span class="token comment">// getDefaultExport function for compatibility with non-harmony modules</span>
<span class="token comment">/******/</span> 	__webpack_require__<span class="token punctuation">.</span><span class="token function-variable function">n</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">/******/</span> 		<span class="token keyword">var</span> getter <span class="token operator">=</span> module <span class="token operator">&amp;&amp;</span> module<span class="token punctuation">.</span>__esModule <span class="token operator">?</span>
<span class="token comment">/******/</span> 			<span class="token keyword">function</span> <span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> module<span class="token punctuation">[</span><span class="token string">'default'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">:</span>
<span class="token comment">/******/</span> 			<span class="token keyword">function</span> <span class="token function">getModuleExports</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> module<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span> 		__webpack_require__<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>getter<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> getter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span> 		<span class="token keyword">return</span> getter<span class="token punctuation">;</span>
<span class="token comment">/******/</span> 	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span> 	<span class="token comment">// Object.prototype.hasOwnProperty.call</span>
<span class="token comment">/******/</span> 	__webpack_require__<span class="token punctuation">.</span><span class="token function-variable function">o</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">object<span class="token punctuation">,</span> property</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>object<span class="token punctuation">,</span> property<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span> 	<span class="token comment">// __webpack_public_path__</span>
<span class="token comment">/******/</span> 	__webpack_require__<span class="token punctuation">.</span>p <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span> 	<span class="token comment">// Load entry module and return exports</span>
<span class="token comment">/******/</span> 	<span class="token keyword">return</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span>__webpack_require__<span class="token punctuation">.</span>s <span class="token operator">=</span> <span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">/************************************************************************/</span>
<span class="token comment">/******/</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>

<span class="token comment">/***/</span> <span class="token string">&quot;./src/index.js&quot;</span><span class="token operator">:</span>
<span class="token comment">/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/</span>
<span class="token comment">/*! no static exports found */</span>
<span class="token comment">/***/</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> exports</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">&quot;console.log('Goodbye, webpack v4!');\n\n//# sourceURL=webpack:///./src/index.js?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/***/</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">/******/</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="v5"><a href="#v5" class="header-anchor">#</a> v5</h4> <p><code>src/index.js</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello, webpack v5!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¿è¡Œ<code>webpack --mode development</code>ï¼Œè¾“å‡ºçš„<code>main.js(872bytes)</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*
 * ATTENTION: The &quot;eval&quot; devtool has been used (maybe by default in mode: &quot;development&quot;).
 * This devtool is not neither made for production nor for readable output files.
 * It uses &quot;eval()&quot; calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with &quot;devtool: false&quot;.
 * If you are looking for production-ready output files, see mode: &quot;production&quot; (https://webpack.js.org/configuration/mode/).
 */</span>
<span class="token comment">/******/</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// webpackBootstrap</span>
<span class="token comment">/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/</span>
<span class="token comment">/*! unknown exports (runtime-defined) */</span>
<span class="token comment">/*! runtime requirements:  */</span>
<span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">&quot;console.log('Hello, webpack v5!');\n\n//# sourceURL=webpack://webpack-v4/./src/index.js?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">;</span>
</code></pre></div><h3 id="æŒ‰éœ€åŠ è½½å¯¹æ¯”"><a href="#æŒ‰éœ€åŠ è½½å¯¹æ¯”" class="header-anchor">#</a> æŒ‰éœ€åŠ è½½å¯¹æ¯”</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//srcæ–‡ä»¶å¤¹index.js</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./async.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">_</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Webpack5&quot;</span><span class="token punctuation">)</span>

<span class="token comment">//srcæ–‡ä»¶å¤¹async.js</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token string">&quot;å¼‚æ­¥æ•°æ®ğŸŠ&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> data<span class="token punctuation">;</span>
</code></pre></div><h4 id="v4-2"><a href="#v4-2" class="header-anchor">#</a> v4</h4> <p>é»˜è®¤å¯¹è¿™äº›æ–‡ä»¶ç”Ÿæˆä¸€å †<code>0.js</code>ã€<code>1.js</code>ã€<code>2.js</code>ï¼Œéœ€è¦ä½¿ç”¨<code>import(/* webpackChunkName: &quot;name&quot; */ &quot;module&quot;)</code> æ‰èƒ½å¯¹è¿™äº›æ¨¡å—å‘½åã€‚</p> <h4 id="v5-2"><a href="#v5-2" class="header-anchor">#</a> v5</h4> <p>åœ¨å¼€å‘æ¨¡å¼ä¸­å¯ç”¨äº†ä¸€ä¸ªæ–°å‘½åçš„å— id ç®—æ³•ï¼Œè¯¥ç®—æ³•æä¾›å—(ä»¥åŠæ–‡ä»¶å)å¯è¯»çš„å¼•ç”¨ã€‚ æ¨¡å— ID ç”±å…¶ç›¸å¯¹äºä¸Šä¸‹æ–‡çš„è·¯å¾„ç¡®å®šã€‚</p> <h3 id="moduleids-å’Œ-chunkids"><a href="#moduleids-å’Œ-chunkids" class="header-anchor">#</a> moduleIds å’Œ chunkIds</h3> <h4 id="v4-3"><a href="#v4-3" class="header-anchor">#</a> v4</h4> <p>åœ¨v4çš„ç‰ˆæœ¬ä¸­ä¸åŒæ¨¡å—ä¼šè¢«ä¸€æ¬¡åˆ†é…ç»™ä¸€ä¸ª<code>chunkId</code>ã€‚ç„¶åç”Ÿæˆçš„<code>main.js</code>æ ¹æ®<code>chunkId</code>åŠ è½½å¯¹åº”çš„æ–‡ä»¶ï¼Œä½†æ˜¯æ‚²å‰§çš„äº‹å¦‚æœæ­¤æ—¶æˆ‘åˆ æ‰å‰é¢çš„ä¸€äº›æ¨¡å—æ—¶ï¼Œä¼šå¯¼è‡´åé¢çš„æ¨¡å—ä¸Šä½ä¹Ÿå°±æ˜¯åŸæ¥çš„<code>1</code>å˜æˆäº†<code>0</code>ï¼Œä¸åˆ©äºé•¿æ•ˆç¼“å­˜ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span><span class="token punctuation">{</span>
    chunkIds<span class="token operator">:</span> <span class="token string">&quot;natural&quot;</span><span class="token punctuation">,</span>
    moduleIds<span class="token operator">:</span> <span class="token string">&quot;size&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="v5-3"><a href="#v5-3" class="header-anchor">#</a> v5</h4> <p>æ·»åŠ äº†ç”¨äºé•¿æ•ˆç¼“å­˜çš„æ–°ç®—æ³•ã€‚åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹ï¼Œé»˜è®¤å¯ç”¨è¿™äº›åŠŸèƒ½ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span><span class="token punctuation">{</span>
    chunkIds<span class="token operator">:</span> <span class="token string">&quot;deterministic&quot;</span><span class="token punctuation">,</span>
    moduleIds<span class="token operator">:</span> <span class="token string">&quot;deterministic&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ­¤ç®—æ³•é‡‡ç”¨ç¡®å®šæ€§çš„æ–¹å¼å°†çŸ­æ•°å­— IDï¼ˆ3 æˆ– 4 ä¸ªå­—ç¬¦ï¼‰åˆ†é…ç»™ <code>modules</code> å’Œ <code>chunks</code>ã€‚è¿™æ˜¯åŸºäº <code>bundle</code> å¤§å°å’Œé•¿æ•ˆç¼“å­˜é—´çš„æŠ˜ä¸­æ–¹æ¡ˆã€‚</p> <h3 id="ç¼–è¯‘é€Ÿåº¦"><a href="#ç¼–è¯‘é€Ÿåº¦" class="header-anchor">#</a> ç¼–è¯‘é€Ÿåº¦</h3> <p><code>Webpack</code>çš„ç¼–è¯‘é€Ÿåº¦ç›¸ä¿¡æ˜¯å¾ˆå¤šåŒå­¦æ¯”è¾ƒå¤´ç—›çš„é—®é¢˜ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿæœ‰å¾ˆå¤šä¼˜åŒ–çš„åŠæ³•ã€‚æ¯”å¦‚<code>HappyPack</code>ã€<code>Cache-loader</code>ã€æ’é™¤<code>node_modules</code>ã€å¤šçº¿ç¨‹å‹ç¼©ç”šè‡³å¯ä»¥é‡‡ç”¨åˆ†å¸ƒå¼ç¼–è¯‘ç­‰ç­‰ã€‚å…¶å®<code>Webpack</code>ç¼–è¯‘æ…¢è·Ÿä»–çš„<code>laoder</code>æœºåˆ¶ä¸æ— å…³ç³»ï¼Œæ¯”å¦‚ <code>string</code>-&gt;<code>ast</code>-&gt;<code>string</code> ã€‚</p> <p>åœ¨v5çš„ç‰ˆæœ¬ä¸­åªè¦åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ ä¸Šè¿™æ ·ä¸€å¥:</p> <div class="language-js extra-class"><pre class="language-js"><code>  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    cache<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">'filesystem'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><h3 id="module-federation"><a href="#module-federation" class="header-anchor">#</a> Module Federation</h3> <h4 id="ä»€ä¹ˆæ˜¯-module-federation"><a href="#ä»€ä¹ˆæ˜¯-module-federation" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯ Module Federation</h4> <p><code>Module Federation</code>ä¸»è¦æ˜¯ç”¨æ¥è§£å†³å¤šä¸ªåº”ç”¨ä¹‹é—´ä»£ç å…±äº«çš„é—®é¢˜ï¼Œå¯ä»¥è®©æˆ‘ä»¬çš„æ›´åŠ ä¼˜é›…çš„å®ç°è·¨åº”ç”¨çš„ä»£ç å…±äº«ã€‚å‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰ä¸¤ä¸ªé¡¹ç›®Aã€Bï¼Œ<code>é¡¹ç›® A</code>å†…éƒ¨æœ‰ä¸ªè½®æ’­å›¾ç»„ä»¶ï¼Œ<code>é¡¹ç›® B</code>å†…éƒ¨æœ‰ä¸ªæ–°é—»åˆ—è¡¨ç»„ä»¶ã€‚</p> <p>ç°åœ¨æ¥äº†ä¸ªéœ€æ±‚ï¼Œè¦å°†<code>é¡¹ç›® B</code>çš„æ–°é—»åˆ—è¡¨ç§»æ¤åˆ°<code>é¡¹ç›® A</code>ä¸­ï¼Œè€Œä¸”éœ€è¦ä¿è¯åç»­çš„è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œä¸¤è¾¹çš„æ–°é—»åˆ—è¡¨æ ·å¼ä¿æŒä¸€è‡´ã€‚è¿™æ—¶å€™ä½ æœ‰ä¸¤ç§åšæ³•ï¼š</p> <ol><li>ä½¿ç”¨ CV å¤§æ³•ï¼Œå°†<code>é¡¹ç›® B</code>çš„ä»£ç å®Œæ•´å¤åˆ¶ä¸€ä»½åˆ°<code>é¡¹ç›® A</code>ï¼›</li> <li>å°†æ–°é—»ç»„ä»¶ç‹¬ç«‹ï¼Œå‘å¸ƒåˆ°å†…éƒ¨çš„ npmï¼Œé€šè¿‡ npm åŠ è½½ç»„ä»¶ï¼›</li></ol> <p>CV å¤§æ³•è‚¯å®šæ¯”ç‹¬ç«‹ç»„ä»¶è¦å¿«ï¼Œæ¯•ç«Ÿä¸éœ€è¦å°†ç»„ä»¶ä»£ç ä»<code>é¡¹ç›® B</code>ç‹¬ç«‹å‡ºæ¥ï¼Œç„¶åå‘å¸ƒ npmã€‚ä½†æ˜¯ CV å¤§æ³•çš„ç¼ºé™·æ˜¯ï¼Œä¸èƒ½åŠæ—¶åŒæ­¥ä»£ç ï¼Œå¦‚æœä½ çš„å¦ä¸€ä¸ªåŒäº‹åœ¨ä½ å¤åˆ¶ä»£ç ä¹‹åï¼Œå¯¹<code>é¡¹ç›® B</code>çš„æ–°é—»ç»„ä»¶è¿›è¡Œäº†ä¿®æ”¹ï¼Œæ­¤æ—¶<code>é¡¹ç›® A</code>ä¸<code>é¡¹ç›® B</code>çš„æ–°é—»ç»„ä»¶å°±ä¸ä¸€è‡´äº†ã€‚</p> <p>è¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœä½ ä¸¤ä¸ªé¡¹ç›®æ°å¥½ä½¿ç”¨äº† Webpack 5ï¼Œé‚£åº”è¯¥æ˜¯ä»¶å¾ˆå¹¸ç¦çš„äº‹ï¼Œå› ä¸ºä½ ä¸éœ€è¦ä»»ä½•ä»£ä»·ï¼Œåªéœ€è¦å‡ è¡Œé…ç½®ï¼Œå°±èƒ½ç›´æ¥åœ¨<code>é¡¹ç›® A</code>ç”¨ä¸Š<code>é¡¹ç›® B</code>çš„æ–°é—»ç»„ä»¶ã€‚ä¸ä»…å¦‚æ­¤ï¼Œè¿˜å¯ä»¥åœ¨<code>é¡¹ç›® B</code>ä¸­ä½¿ç”¨<code>é¡¹ç›® A</code>çš„è½®æ’­å›¾ç»„ä»¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡<code>Module Federation</code>å®ç°çš„ä»£ç å…±äº«æ˜¯åŒå‘çš„ã€‚</p> <h4 id="module-federation-å®è·µ"><a href="#module-federation-å®è·µ" class="header-anchor">#</a> Module Federation å®è·µ</h4> <p>é¦–å…ˆçœ‹ä¸€ä¸‹é¡¹ç›®çš„ç›®å½•ç»“æ„ã€‚</p> <p><strong>é¡¹ç›®A:</strong></p> <div class="language-txt extra-class"><pre class="language-text"><code>â”œâ”€â”€ public
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ index.js
â”‚   â”œâ”€â”€ bootstrap.js
â”‚   â”œâ”€â”€ App.js
â”‚   â””â”€â”€ Slides.js
â”œâ”€â”€ package.json
â””â”€â”€ webpack.config.js
</code></pre></div><p><strong>é¡¹ç›®B:</strong></p> <div class="language-txt extra-class"><pre class="language-text"><code>â”œâ”€â”€ public
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ index.js
â”‚   â”œâ”€â”€ bootstrap.js
â”‚   â”œâ”€â”€ App.js
â”‚   â””â”€â”€ NewsList.js
â”œâ”€â”€ package.json
â””â”€â”€ webpack.config.js
</code></pre></div><p>é¡¹ç›® Aã€B çš„å·®å¼‚ä¸»è¦åœ¨ <code>App.js</code> ä¸­ import çš„ç»„ä»¶ä¸åŒï¼Œä¸¤è€…çš„ <code>index.js</code>ã€<code>bootstrap.js</code> éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Slides <span class="token keyword">from</span> <span class="token string">'./Slides'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> textAlign<span class="token operator">:</span> <span class="token string">'center'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">App1, Local Slides</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Slides</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre></div><p><strong>é¡¹ç›®Açš„<code>App.js</code>:</strong></p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Slides <span class="token keyword">from</span> <span class="token string">'./Slides'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> textAlign<span class="token operator">:</span> <span class="token string">'center'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">App1, Local Slides</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Slides</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre></div><p><strong>é¡¹ç›®Bçš„<code>App.js</code>:</strong></p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> NewsList <span class="token keyword">from</span> <span class="token string">'./NewsList'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> RemoteSlides <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;app1/Slides&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> textAlign<span class="token operator">:</span> <span class="token string">'center'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">App 2, Local NewsList</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NewsList</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre></div><p>åœ¨æ¥å…¥ <code>Module Federation</code> ä¹‹å‰çš„ <strong><code>webpack</code></strong> é…ç½®ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// å…¥å£æ–‡ä»¶</span>
  entry<span class="token operator">:</span> <span class="token string">&quot;./src/index&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// å¼€å‘æœåŠ¡é…ç½®</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// é¡¹ç›® A ç«¯å£ä¸º 3001ï¼Œé¡¹ç›® B ç«¯å£ä¸º 3002</span>
    port<span class="token operator">:</span> <span class="token number">3001</span><span class="token punctuation">,</span>
    contentBase<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// é¡¹ç›® A ç«¯å£ä¸º 3001ï¼Œé¡¹ç›® B ç«¯å£ä¸º 3002</span>
    publicPath<span class="token operator">:</span> <span class="token string">&quot;http://localhost:3001/&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä½¿ç”¨ babel-loader è½¬ä¹‰</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.jsx?$/</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
        exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-react&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// å¤„ç† html</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> <span class="token string">&quot;./public/index.html&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="é…ç½®ï¼šexposes-remotes"><a href="#é…ç½®ï¼šexposes-remotes" class="header-anchor">#</a> é…ç½®ï¼šexposes/remotes</h5> <p>æˆ‘ä»¬ä¿®æ”¹ webpack é…ç½®ï¼Œå¼•å…¥ <code>Module Federation</code>ï¼Œè®©<code>é¡¹ç›® A</code>å¼•å…¥<code>é¡¹ç›® B</code>çš„æ–°é—»ç»„ä»¶ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// é¡¹ç›® B çš„ webpack é…ç½®</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> ModuleFederationPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>container<span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// æä¾›ç»™å…¶ä»–æœåŠ¡åŠ è½½çš„æ–‡ä»¶</span>
      filename<span class="token operator">:</span> <span class="token string">&quot;remoteEntry.js&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// å”¯ä¸€IDï¼Œç”¨äºæ ‡è®°å½“å‰æœåŠ¡</span>
      name<span class="token operator">:</span> <span class="token string">&quot;app2&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// éœ€è¦æš´éœ²çš„æ¨¡å—ï¼Œä½¿ç”¨æ—¶é€šè¿‡ `${name}/${expose}` å¼•å…¥</span>
      exposes<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;./NewsList&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./src/NewsList&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// é¡¹ç›® A çš„ webpack é…ç½®</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> ModuleFederationPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>container<span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&quot;app1&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// å¼•ç”¨ app2 çš„æœåŠ¡</span>
      remotes<span class="token operator">:</span> <span class="token punctuation">{</span>
        app2<span class="token operator">:</span> <span class="token string">&quot;app2@http://localhost:3002/remoteEntry.js&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>éœ€è¦é‡ç‚¹å…³æ³¨ <code>exposes</code>/<code>remotes</code>ï¼š</p> <ul><li>æä¾›äº† <code>exposes</code> é€‰é¡¹çš„è¡¨ç¤ºå½“å‰åº”ç”¨æ˜¯ä¸€ä¸ª <code>Remote</code>ï¼Œ<code>exposes</code> å†…çš„æ¨¡å—å¯ä»¥è¢«å…¶ä»–çš„ <code>Host</code> å¼•ç”¨ï¼Œå¼•ç”¨æ–¹å¼ä¸º <code>import(${name}/${expose})</code>ã€‚</li> <li>æä¾›äº† <code>remotes</code> é€‰é¡¹çš„è¡¨ç¤ºå½“å‰åº”ç”¨æ˜¯ä¸€ä¸ª <code>Host</code>ï¼Œå¯ä»¥å¼•ç”¨ <code>remote</code> ä¸­ <code>expose</code> çš„æ¨¡å—ã€‚</li></ul> <p>ç„¶åä¿®æ”¹<code>é¡¹ç›® A</code>çš„<code>App.js</code>ï¼š</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Slides <span class="token keyword">from</span> <span class="token string">'./Slides'</span><span class="token punctuation">;</span>
<span class="token comment">// å¼•å…¥é¡¹ç›® B çš„æ–°é—»ç»„ä»¶</span>
<span class="token keyword">const</span> RemoteNewsList <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;app2/NewsList&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> textAlign<span class="token operator">:</span> <span class="token string">'center'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">App1, Local Slides, Remote NewsList</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Slides</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">React.Suspense</span></span> <span class="token attr-name">fallback</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Loading Slides<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">RemoteNewsList</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">React.Suspense</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre></div><p>æ­¤æ—¶ï¼Œ<code>é¡¹ç›® A</code>å°±å·²ç»æˆåŠŸæ¥å…¥äº†<code>é¡¹ç›® B</code>çš„æ–°é—»ç»„ä»¶ã€‚æˆ‘ä»¬å†çœ‹çœ‹<code>é¡¹ç›® A</code>çš„ç½‘ç»œè¯·æ±‚ï¼Œ<code>é¡¹ç›® A</code>é…ç½®äº† <code>app2: &quot;app2@http://localhost:3002/remoteEntry.js&quot;</code> çš„ <code>remote</code> åï¼Œä¼šå…ˆè¯·æ±‚<code>é¡¹ç›® B</code>çš„ <code>remoteEntry.js</code> æ–‡ä»¶ä½œä¸ºå…¥å£ã€‚åœ¨æˆ‘ä»¬ import <code>é¡¹ç›® B</code>çš„æ–°é—»ç»„ä»¶æ—¶ï¼Œå°±ä¼šå»è·å–é¡¹ç›® B çš„ <code>src_NewsList_js.js</code> æ–‡ä»¶ã€‚</p> <p><img src="/remoteEntry.png" alt="remoteEntry"></p> <h5 id="é…ç½®ï¼šshared"><a href="#é…ç½®ï¼šshared" class="header-anchor">#</a> é…ç½®ï¼šshared</h5> <p>é™¤äº†å‰é¢æåˆ°çš„æ¨¡å—å¼•å…¥å’Œæ¨¡å—æš´éœ²ç›¸å…³çš„é…ç½®å¤–ï¼Œè¿˜æœ‰ä¸ª <code>shared</code> é…ç½®ï¼Œä¸»è¦æ˜¯ç”¨æ¥é¿å…é¡¹ç›®å‡ºç°å¤šä¸ªå…¬å…±ä¾èµ–ã€‚</p> <p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å½“å‰çš„<code>é¡¹ç›® A</code>ï¼Œå·²ç»å¼•å…¥äº†ä¸€ä¸ª <code>react/react-dom</code>ï¼Œè€Œ<code>é¡¹ç›® B</code> æš´éœ²çš„æ–°é—»åˆ—è¡¨ç»„ä»¶ä¹Ÿä¾èµ–äº† <code>react/react-dom</code>ã€‚å¦‚æœä¸è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<code>é¡¹ç›® A</code> å°±ä¼šåŠ è½½ä¸¤ä¸ª <code>react</code> åº“ã€‚è¿™è®©æˆ‘å›æƒ³èµ·åˆšåˆšå…¥è¡Œçš„æ—¶å€™ï¼Œå…¬å¸çš„ä¸€ä¸ªé¡¹ç›®ç”±äºæ˜¯ <code>PHP</code> æ¨¡æ¿æ‹¼æ¥çš„æ–¹å¼ï¼Œä¸åŒéƒ¨é—¨åœ¨è‡ªå·±çš„æ¨¡æ¿ä¸­éƒ½å¼•å…¥äº†ä¸€ä¸ª <code>jQuery</code>ï¼Œå¯¼è‡´é¡¹ç›®ä¸­å¼•å…¥äº†ä¸‰ä¸ªä¸åŒç‰ˆæœ¬çš„ <code>jQuery</code>ï¼Œç‰¹åˆ«å½±å“é¡µé¢æ€§èƒ½ã€‚</p> <p>æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨ <code>Module Federation</code> çš„æ—¶å€™ä¸€å®šè¦è®°å¾—ï¼Œå°†å…¬å…±ä¾èµ–é…ç½®åˆ° <code>shared</code> ä¸­ã€‚å¦å¤–ï¼Œä¸€å®šè¦ä¸¤ä¸ªé¡¹ç›®åŒæ—¶é…ç½® <code>shared</code> ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p> <p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨æµè§ˆå™¨æ‰“å¼€<code>é¡¹ç›® A</code>ï¼Œåœ¨ Chrome çš„ network é¢æ¿ä¸­ï¼Œå¯ä»¥çœ‹åˆ°<code>é¡¹ç›® A</code> ç›´æ¥ä½¿ç”¨äº†<code>é¡¹ç›® B</code> çš„ <code>react/react-dom</code>ã€‚</p> <p><img src="/v5-share.png" alt="v5-share"></p> <h5 id="åŒå‘å…±äº«"><a href="#åŒå‘å…±äº«" class="header-anchor">#</a> åŒå‘å…±äº«</h5> <p>å‰é¢æåˆ°è¿‡ï¼Œ<code>Module Federation</code> çš„å…±äº«å¯ä»¥æ˜¯åŒå‘çš„ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°†<code>é¡¹ç›® A</code> ä¹Ÿé…ç½®æˆä¸€ä¸ª <code>Remote</code>ï¼Œå°†<code>é¡¹ç›® A</code> çš„è½®æ’­å›¾ç»„ä»¶æš´éœ²ç»™<code>é¡¹ç›® B</code> ä½¿ç”¨ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// é¡¹ç›® B çš„ webpack é…ç½®</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> ModuleFederationPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>container<span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&quot;app2&quot;</span><span class="token punctuation">,</span>
      filename<span class="token operator">:</span> <span class="token string">&quot;remoteEntry.js&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// æš´éœ²æ–°é—»åˆ—è¡¨ç»„ä»¶</span>
      exposes<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;./NewsList&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./src/NewsList&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// å¼•ç”¨ app1 çš„æœåŠ¡</span>
      remotes<span class="token operator">:</span> <span class="token punctuation">{</span>
        app1<span class="token operator">:</span> <span class="token string">&quot;app1@http://localhost:3001/remoteEntry.js&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      shared<span class="token operator">:</span> <span class="token punctuation">{</span>
        react<span class="token operator">:</span> <span class="token punctuation">{</span> singleton<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;react-dom&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> singleton<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// é¡¹ç›® A çš„ webpack é…ç½®</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> ModuleFederationPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>container<span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&quot;app1&quot;</span><span class="token punctuation">,</span>
      filename<span class="token operator">:</span> <span class="token string">&quot;remoteEntry.js&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// æš´éœ²è½®æ’­å›¾ç»„ä»¶</span>
      exposes<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;./Slides&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./src/Slides&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// å¼•ç”¨ app2 çš„æœåŠ¡</span>
      remotes<span class="token operator">:</span> <span class="token punctuation">{</span>
        app2<span class="token operator">:</span> <span class="token string">&quot;app2@http://localhost:3002/remoteEntry.js&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      shared<span class="token operator">:</span> <span class="token punctuation">{</span>
        react<span class="token operator">:</span> <span class="token punctuation">{</span> singleton<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;react-dom&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> singleton<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>åœ¨é¡¹ç›® B ä¸­ä½¿ç”¨è½®æ’­å›¾ç»„ä»¶ï¼š</p> <div class="language-diff extra-class"><pre class="language-diff"><code>// App.js
import React from &quot;react&quot;;
import NewsList from './NewsList';
<span class="token inserted-sign inserted">+const RemoteSlides = React.lazy(() =&gt; import(&quot;app1/Slides&quot;));
</span>
const App = () =&gt; (
<span class="token unchanged">  &lt;div&gt;
</span><span class="token deleted-sign deleted">-   &lt;h2 style={{ textAlign: 'center' }}&gt;App 2, Local NewsList&lt;/h2&gt;
</span><span class="token inserted-sign inserted">+   &lt;h2 style={{ textAlign: 'center' }}&gt;App 2, Remote Slides, Local NewsList&lt;/h2&gt;
+   &lt;React.Suspense fallback=&quot;Loading Slides&quot;&gt;
+     &lt;RemoteSlides /&gt;
+   &lt;/React.Suspense&gt;
</span><span class="token unchanged">    &lt;NewsList /&gt;
  &lt;/div&gt;
</span>);

export default App;
</code></pre></div><h4 id="åŠ è½½é€»è¾‘"><a href="#åŠ è½½é€»è¾‘" class="header-anchor">#</a> åŠ è½½é€»è¾‘</h4> <p>è¿™é‡Œæœ‰ä¸€ä¸ªç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œå°±æ˜¯å…¥å£æ–‡ä»¶ <code>index.js</code> æœ¬èº«æ²¡æœ‰ä»€ä¹ˆé€»è¾‘ï¼Œåè€Œå°†é€»è¾‘æ”¾åœ¨äº† <code>bootstrap.js</code> ä¸­ï¼Œ<code>index.js</code> å»åŠ¨æ€åŠ è½½ <code>bootstrap.js</code>ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./bootstrap&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// bootstrap.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&quot;react-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App&quot;</span><span class="token punctuation">;</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å¦‚æœåˆ æ‰ <code>bootstrap.js</code>ï¼Œå°†é€»è¾‘ç›´æ¥æ”¾åˆ° <code>index.js</code> æ˜¯å¦å¯è¡Œå‘¢ï¼Ÿç»è¿‡æµ‹è¯•ï¼Œç¡®å®æ˜¯ä¸å¯è¡Œçš„ã€‚</p> <p><img src="/v5-eager.png" alt="v5-eager"></p> <p>é€šè¿‡ <code>network</code> é¢æ¿ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œ<code>remote.js</code> æ˜¯å…ˆäº <code>bootstrap.js</code> åŠ è½½çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ <code>bootstrap.js</code> å¿…é¡»æ˜¯ä¸ªå¼‚æ­¥é€»è¾‘ã€‚</p> <p><img src="/v5-network.png" alt="v5-network"></p> <h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="header-anchor">#</a> æ€»ç»“</h4> <p>Webpack 5 æä¾›çš„ <code>Module Federation</code> è¿˜æ˜¯å¾ˆå¼ºå¤§çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤šä¸ªé¡¹ç›®ä¸­è¿›è¡Œä»£ç å…±äº«ï¼Œæä¾›äº†æå¤§çš„ä¾¿åˆ©ï¼Œä½†æ˜¯è¿™æœ‰ä¸€ä¸ªè‡´å‘½ç¼ºç‚¹ï¼Œéœ€è¦ä½ ä»¬æ‰€æœ‰çš„é¡¹ç›®éƒ½åŸºäº Webpackï¼Œè€Œä¸”å·²ç»å‡çº§åˆ°äº† Webpack 5ã€‚ç›¸æ¯”èµ· <code>Module Federation</code>ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥è€ƒè™‘ <code>vite</code> æä¾›çš„æ–¹æ¡ˆï¼Œåˆ©ç”¨æµè§ˆå™¨åŸç”Ÿçš„æ¨¡å—åŒ–èƒ½åŠ›ï¼Œè¿›è¡Œä»£ç å…±äº«ã€‚</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">æœ€åä¿®æ”¹æ—¶é—´:</span> <span class="time">9/25/2020, 11:05:33 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.be40bd60.js" defer></script><script src="/assets/js/2.fcfb7384.js" defer></script><script src="/assets/js/12.0b6b2e75.js" defer></script>
  </body>
</html>
